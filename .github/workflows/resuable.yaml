name : Resuable-Workflow 

on :
  workflow_call :
    inputs :
      image :
        required : true
        type : string
#       userid :
#         required : true
#         type : number
#       tag :
#         required : true
#         type : number
    secrets :
      DOCKER_USERNAME :
        required : true
      DOCKER_PASSWORD :
        required : true
        
jobs :

  Building-and-Pushing-DockerImage :
   
    runs-on : self-hosted
    
    outputs:
      output1: ${{ steps.conty.outputs.taggy }}
    
    steps :
    
      - name : Giving permission to our Repository
        uses: actions/checkout@v2
      
      - name : Creating a label
        id : conty
        run : |
              if [[ ${{ GITHUB_EVENT_NAME }} == push ]]; then 
                echo "::set-output name=taggy::vitty"
              else 
                echo "::set-output name=taggy::vitto"
              fi 
              
      - name: docker-upload
        uses: mr-smithers-excellent/docker-build-push@v5
        with:
         image: raji2306/${{ inputs.image }}:$taggy
         registry: docker.io
         username: ${{ secrets.DOCKER_USERNAME }}
         password: ${{ secrets.DOCKER_PASSWORD }}
           
